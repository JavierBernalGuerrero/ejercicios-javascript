<!DOCTYPE html>


<html>
	<head>
		<title>Page Title</title>
		<script>
			var barraAncho;
			var intervalo;

			function comenzar() {
				document.getElementById("botonParar").disabled = false;
				document.getElementById("botonAceptar").disabled = true;
				console.log("Has pulsado comenzar");

				barraAncho = 0;
				var barraTiempo = document.getElementById("tiempo").value;
				document.getElementById("barra").style.background = document.getElementById("color").value;

				intervalo = setInterval(progreso, barraTiempo);


			}

			function detener() {
				document.getElementById("botonParar").disabled = true;
				document.getElementById("botonAceptar").disabled = false;
				console.log("Has pulsado detener");

				clearInterval(intervalo);

			}

			function progreso () {
				console.log(barraAncho + " - " + document.getElementById("longitud").value);
				barraAncho++;
				document.getElementById("barra").innerHTML = Math.ceil((barraAncho / document.getElementById("longitud").value) * 100) + "%";
				document.getElementById("barra").style.width = barraAncho + "px";

				if (barraAncho == document.getElementById("longitud").value) {
					clearInterval(intervalo);

					document.getElementById("botonParar").disabled = true;
					document.getElementById("botonAceptar").disabled = false;
				}

			}
		</script>
	</head>
	<body>
		<div>Longitud:
			<input id="longitud" type="text" placeholder="en pixeles">
		</div>

		<div>Color:
			<input id="color" type="color">
		</div>

		<div>Tiempo/pixel:
			<input id="tiempo" type="number">
		</div>

		<button id="botonAceptar" onclick="comenzar()">Aceptar</button>
		<button id="botonParar" onclick="detener()" disabled="disabled">Detener</button>

		<div id="barra" style="width: 0px; height: 20px; background-color: red;">0%</div>

	</body>
</html> 